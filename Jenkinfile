pipeline {
agent any


stages {
stage('Clone Repository') {
steps {
git 'https://github.com/karthickbalaraman6/nodejsapp.git'
}
}


stage('Build Docker Image') {
steps {
sh 'docker build -t nodejsapp .'
}
}


stage('Run Container') {
steps {
sh 'docker stop nodejsapp || true'
sh 'docker rm nodejsapp || true'
sh 'docker run -d -p 3000:3000 --name nodejsapp nodejsapp'
}
}
}
}